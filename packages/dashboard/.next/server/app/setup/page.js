(()=>{var e={};e.id=413,e.ids=[413],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3465:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>c,routeModule:()=>h,tree:()=>d}),t(3415),t(6494),t(9747);var s=t(4272),r=t(8380),l=t(775),n=t.n(l),i=t(5351),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);t.d(a,o);let d=["",{children:["setup",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,3415)),"/Users/assistant/Github/kodex/packages/dashboard/app/setup/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,6494)),"/Users/assistant/Github/kodex/packages/dashboard/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9747,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/assistant/Github/kodex/packages/dashboard/app/setup/page.tsx"],p="/setup/page",u={require:t,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/setup/page",pathname:"/setup",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},2260:(e,a,t)=>{Promise.resolve().then(t.bind(t,9588))},2398:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});let s=(0,t(5943).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},9588:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>O});var s=t(3990),r=t(5636),l=t(6177),n=t(3253),i=t(3394),o=t(8989),d=t(171),c=t(431),p=t(1232),u=t(7630),h=t(5195);function x({value:e,onChange:a,onValidate:t}){let[l,x]=(0,r.useState)(!1),[m,g]=(0,r.useState)(null),j=async()=>{if(e.trim()){x(!0);try{let a=await t(e);g(a)}catch(e){g({valid:!1,error:"Failed to validate path"})}finally{x(!1)}}};return(0,s.jsxs)(d.Zb,{children:[(0,s.jsxs)(d.Ol,{children:[(0,s.jsxs)(d.ll,{className:"flex items-center gap-2",children:[s.jsx(c.Z,{className:"h-5 w-5"}),"Project Selection"]}),s.jsx(d.SZ,{children:"Enter the path to your project folder"})]}),(0,s.jsxs)(d.aY,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(i._,{htmlFor:"project-path",children:"Project Path"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[s.jsx(n.I,{id:"project-path",placeholder:"/path/to/your/project",value:e,onChange:e=>{a(e.target.value),g(null)},className:"flex-1"}),s.jsx(o.z,{onClick:j,variant:"outline",disabled:l||!e.trim(),children:l?s.jsx(p.Z,{className:"h-4 w-4 animate-spin"}):"Validate"})]})]}),m&&s.jsx("div",{className:`flex items-center gap-2 rounded-md p-3 text-sm ${m.valid?"bg-green-50 text-green-800 dark:bg-green-900/20 dark:text-green-200":"bg-red-50 text-red-800 dark:bg-red-900/20 dark:text-red-200"}`,children:m.valid?(0,s.jsxs)(s.Fragment,{children:[s.jsx(u.Z,{className:"h-4 w-4"}),(0,s.jsxs)("span",{children:["Valid project path",m.hasConfig?" - Configuration found":" - No configuration found, will create new"]})]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx(h.Z,{className:"h-4 w-4"}),s.jsx("span",{children:m.error})]})})]})]})}var m=t(66),g=t(5943);let j=(0,g.Z)("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]),v=[{value:"anthropic",label:"Anthropic (Claude)"},{value:"openai",label:"OpenAI (GPT)"},{value:"google",label:"Google (Gemini)"}],f={anthropic:[{value:"claude-3-5-sonnet-20241022",label:"Claude 3.5 Sonnet"},{value:"claude-3-5-haiku-20241022",label:"Claude 3.5 Haiku"},{value:"claude-3-opus-20240229",label:"Claude 3 Opus"}],openai:[{value:"gpt-4o",label:"GPT-4o"},{value:"gpt-4o-mini",label:"GPT-4o Mini"},{value:"gpt-4-turbo",label:"GPT-4 Turbo"}],google:[{value:"gemini-2.0-flash",label:"Gemini 2.0 Flash"},{value:"gemini-1.5-pro",label:"Gemini 1.5 Pro"},{value:"gemini-1.5-flash",label:"Gemini 1.5 Flash"}]},y={anthropic:"ANTHROPIC_API_KEY",openai:"OPENAI_API_KEY",google:"GOOGLE_API_KEY"};function b({provider:e,model:a,apiKey:t,onProviderChange:r,onModelChange:l,onApiKeyChange:o}){let c=f[e]||[],p=y[e]||"";return(0,s.jsxs)(d.Zb,{children:[(0,s.jsxs)(d.Ol,{children:[(0,s.jsxs)(d.ll,{className:"flex items-center gap-2",children:[s.jsx(j,{className:"h-5 w-5"}),"Model Configuration"]}),s.jsx(d.SZ,{children:"Select the AI model to use for generating documentation"})]}),(0,s.jsxs)(d.aY,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(i._,{htmlFor:"provider",children:"Provider"}),(0,s.jsxs)(m.Ph,{value:e,onValueChange:r,children:[s.jsx(m.i4,{id:"provider",children:s.jsx(m.ki,{placeholder:"Select provider"})}),s.jsx(m.Bw,{children:v.map(e=>s.jsx(m.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(i._,{htmlFor:"model",children:"Model"}),(0,s.jsxs)(m.Ph,{value:a,onValueChange:l,children:[s.jsx(m.i4,{id:"model",children:s.jsx(m.ki,{placeholder:"Select model"})}),s.jsx(m.Bw,{children:c.map(e=>s.jsx(m.Ql,{value:e.value,children:e.label},e.value))})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(i._,{htmlFor:"api-key",children:"API Key (optional)"}),s.jsx(n.I,{id:"api-key",type:"password",placeholder:`Leave empty to use ${p} environment variable`,value:t,onChange:e=>o(e.target.value)}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["If not provided, the ",p," environment variable will be used"]})]})]})]})}var k=t(7595);let P=r.forwardRef(({className:e,...a},t)=>s.jsx("textarea",{className:(0,k.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...a}));P.displayName="Textarea";let w=(0,g.Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);function N({value:e,onChange:a}){return(0,s.jsxs)(d.Zb,{children:[(0,s.jsxs)(d.Ol,{children:[(0,s.jsxs)(d.ll,{className:"flex items-center gap-2",children:[s.jsx(w,{className:"h-5 w-5"}),"Agent Context"]}),s.jsx(d.SZ,{children:"Provide custom instructions to guide the agent during codebase analysis"})]}),s.jsx(d.aY,{className:"space-y-4",children:(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(i._,{htmlFor:"agent-context",children:"Custom Instructions"}),s.jsx(P,{id:"agent-context",placeholder:`Example instructions:

- This is an e-commerce application for selling digital products
- Focus on user-facing features like checkout, account management, and product browsing
- The main user personas are customers and administrators
- Use friendly, conversational language in the documentation`,value:e,onChange:e=>a(e.target.value),className:"min-h-[150px]"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"These instructions help the AI understand your product context and generate more relevant documentation"})]})})]})}let C=(0,g.Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);function _({value:e,onChange:a}){let t=e.join("\n"),r=e=>{a(e.split("\n").map(e=>e.trim()).filter(e=>e.length>0))};return(0,s.jsxs)(d.Zb,{children:[(0,s.jsxs)(d.Ol,{children:[(0,s.jsxs)(d.ll,{className:"flex items-center gap-2",children:[s.jsx(C,{className:"h-5 w-5"}),"Exclusion Patterns"]}),s.jsx(d.SZ,{children:"Specify areas of the codebase to skip during analysis (one pattern per line)"})]}),s.jsx(d.aY,{className:"space-y-4",children:(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(i._,{htmlFor:"exclusion-patterns",children:"Glob Patterns"}),s.jsx(P,{id:"exclusion-patterns",placeholder:`**/node_modules/**
**/*.test.*
**/*.spec.*
**/legacy/**
**/migrations/**`,value:t,onChange:e=>r(e.target.value),className:"min-h-[150px] font-mono text-sm"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Use glob patterns to exclude files and directories. Common patterns include test files, legacy code, and generated files."})]})})]})}let S=(0,g.Z)("FolderOutput",[["path",{d:"M2 7.5V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-1.5",key:"1yk7aj"}],["path",{d:"M2 13h10",key:"pgb2dq"}],["path",{d:"m5 10-3 3 3 3",key:"1r8ie0"}]]);function M({projectPath:e}){let a=e?`${e}/.kodex/docs`:"Select a project first";return(0,s.jsxs)(d.Zb,{children:[(0,s.jsxs)(d.Ol,{children:[(0,s.jsxs)(d.ll,{className:"flex items-center gap-2",children:[s.jsx(S,{className:"h-5 w-5"}),"Output Location"]}),s.jsx(d.SZ,{children:"Generated documentation will be saved to the project folder"})]}),s.jsx(d.aY,{className:"space-y-4",children:(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(i._,{htmlFor:"output-path",children:"Documentation Output Path"}),s.jsx(n.I,{id:"output-path",value:a,disabled:!0,className:"bg-muted font-mono text-sm"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"This location is automatically set based on your project path"})]})})]})}var Z=t(9128),G=t(2398);let F=(0,g.Z)("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),E=["**/*.test.*","**/*.spec.*","**/node_modules/**","**/__tests__/**","**/__mocks__/**"];function O(){let{toast:e}=(0,Z.pm)(),[a,t]=(0,r.useState)(!1),[n,i]=(0,r.useState)(!1),[d,c]=(0,r.useState)(!1),[u,h]=(0,r.useState)({projectPath:"",name:"My Product",provider:"anthropic",model:"claude-3-5-haiku-20241022",apiKey:"",agentContext:"",excludePatterns:E}),m=async e=>{try{let a=await fetch(`/api/config?path=${encodeURIComponent(e)}`);if(a.ok){let t=await a.json();t.config&&(h(a=>({...a,projectPath:e,name:t.config.name||a.name,provider:t.config.llm?.provider||a.provider,model:t.config.llm?.model||a.model,agentContext:t.config.scan?.agentContext||"",excludePatterns:t.config.scan?.exclude||E})),c(!0))}}catch(e){console.error("Failed to load config:",e)}},g=async e=>{try{let a=await fetch(`/api/projects?path=${encodeURIComponent(e)}`),t=await a.json();return t.valid?(c(!0),localStorage.setItem("kodex-project-path",e),t.hasConfig&&await m(e)):c(!1),t}catch(e){return{valid:!1,error:"Failed to validate path"}}},j=async()=>{if(!u.projectPath||!d){e({title:"Error",description:"Please select a valid project path first",variant:"destructive"});return}t(!0);try{if((await fetch("/api/config",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:u.projectPath,config:{name:u.name,version:"1.0.0",scan:{include:["src/**/*.{ts,tsx,js,jsx}"],exclude:u.excludePatterns,framework:"auto",agentContext:u.agentContext||void 0},docs:{outputDir:".kodex/docs",format:"both",topics:["authentication","navigation","data","settings","errors"]},llm:{provider:u.provider,model:u.model,apiKey:u.apiKey||void 0}}})})).ok)e({title:"Configuration saved",description:"Your project settings have been saved successfully"});else throw Error("Failed to save configuration")}catch(a){e({title:"Error",description:"Failed to save configuration",variant:"destructive"})}finally{t(!1)}},v=async()=>{if(!u.projectPath||!d){e({title:"Error",description:"Please select a valid project path first",variant:"destructive"});return}await j(),i(!0);try{let a=await fetch("/api/docs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:u.projectPath,action:"scan"})});if(a.ok){let t=await a.json();e({title:"Scan complete",description:`Generated ${t.generated} docs, updated ${t.updated}, skipped ${t.skipped}`})}else throw Error("Failed to scan codebase")}catch(a){e({title:"Error",description:"Failed to scan codebase",variant:"destructive"})}finally{i(!1)}};return(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[(0,s.jsxs)(l.h,{title:"Project Setup",description:"Configure your Kodex documentation project",children:[(0,s.jsxs)(o.z,{onClick:j,disabled:a||!d,variant:"outline",children:[a?s.jsx(p.Z,{className:"mr-2 h-4 w-4 animate-spin"}):s.jsx(G.Z,{className:"mr-2 h-4 w-4"}),"Save"]}),(0,s.jsxs)(o.z,{onClick:v,disabled:n||!d,children:[n?s.jsx(p.Z,{className:"mr-2 h-4 w-4 animate-spin"}):s.jsx(F,{className:"mr-2 h-4 w-4"}),"Scan & Generate"]})]}),s.jsx("div",{className:"flex-1 overflow-auto p-6",children:(0,s.jsxs)("div",{className:"mx-auto max-w-3xl space-y-6",children:[s.jsx(x,{value:u.projectPath,onChange:e=>h(a=>({...a,projectPath:e})),onValidate:g}),s.jsx(b,{provider:u.provider,model:u.model,apiKey:u.apiKey,onProviderChange:e=>{let a={anthropic:"claude-3-5-haiku-20241022",openai:"gpt-4o-mini",google:"gemini-2.0-flash"};h(t=>({...t,provider:e,model:a[e]||""}))},onModelChange:e=>h(a=>({...a,model:e})),onApiKeyChange:e=>h(a=>({...a,apiKey:e}))}),s.jsx(N,{value:u.agentContext,onChange:e=>h(a=>({...a,agentContext:e}))}),s.jsx(_,{value:u.excludePatterns,onChange:e=>h(a=>({...a,excludePatterns:e}))}),s.jsx(M,{projectPath:u.projectPath})]})})]})}},3394:(e,a,t)=>{"use strict";t.d(a,{_:()=>p});var s=t(3990),r=t(5636);t(914);var l=t(6953),n=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,a)=>{let t=(0,l.Z8)(`Primitive.${a}`),n=r.forwardRef((e,r)=>{let{asChild:l,...n}=e,i=l?t:a;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,s.jsx)(i,{...n,ref:r})});return n.displayName=`Primitive.${a}`,{...e,[a]:n}},{}),i=r.forwardRef((e,a)=>(0,s.jsx)(n.label,{...e,ref:a,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(e.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));i.displayName="Label";var o=t(8914),d=t(7595);let c=(0,o.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),p=r.forwardRef(({className:e,...a},t)=>s.jsx(i,{ref:t,className:(0,d.cn)(c(),e),...a}));p.displayName=i.displayName},3415:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>s});let s=(0,t(3145).createProxy)(String.raw`/Users/assistant/Github/kodex/packages/dashboard/app/setup/page.tsx#default`)}};var a=require("../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),s=a.X(0,[991,165,352,16],()=>t(3465));module.exports=s})();